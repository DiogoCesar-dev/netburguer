{% extends "base.html" %}
{% block title %}Cardapio{% endblock %}

{% block content %}
    <h2 class="text-3xl font-bold text-preto-texto mb-2">Monte seu Pedido</h2>
    <p class="text-cinza-texto mb-6">Escolha pelo menos <strong class="text-vermelho-principal">{{ combo_minimo }}</strong> produtos para ganhar 10% de desconto.</p>
    <hr class="border-gray-200 mb-8">

    {% if mensagem_erro %}
        <div class="p-4 rounded-lg font-semibold bg-red-100 text-red-700 border border-red-300">
            {{ mensagem_erro }}
        </div>
    {% else %}
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            {% for produto in produtos %}
                <div class="p-6 rounded-xl bg-white border-l-4 border-vermelho-principal shadow-lg 
                            hover:shadow-xl hover:transform hover:-translate-y-1 transition duration-300">
                    
                    <div class="flex items-center justify-between mb-2">
                        <h3 class="text-xl font-bold text-preto-texto">{{ produto.nome }}</h3>
                        {% if produto.is_combo %}
                            <span class="inline-block px-3 py-1 text-xs font-bold uppercase rounded-full 
                                         bg-amarelo-principal text-preto-texto tracking-wider">
                                Combo
                            </span>
                        {% endif %}
                    </div>
                    
                    <p class="text-cinza-texto mb-3 text-sm">{{ produto.descricao }}</p>
                    
                    <p class="text-2xl font-extrabold text-vermelho-principal mb-4">
                        R$ {{ produto.preco|floatformat:2 }}
                    </p>

                    <form action="{% url 'adicionar_ao_carrinho' produto.id %}" method="post" class="mt-4">
                        {% csrf_token %}
                        
                        <div class="flex items-center gap-4">
                            <div class="flex flex-col">
                                <label for="quantidade-{{ produto.id }}" class="mb-1 font-semibold text-sm text-preto-texto">Quantidade</label>
                                <input 
                                    type="number" 
                                    id="quantidade-{{ produto.id }}" 
                                    name="quantidade" 
                                    value="1" 
                                    min="1" 
                                    class="w-24 px-3 py-2 border border-gray-300 rounded-lg text-center 
                                           focus:outline-none focus:border-amarelo-principal focus:ring-1 focus:ring-amarelo-principal/30 transition duration-150"
                                >
                            </div>
                            
                            <button 
                                type="submit" 
                                class="mt-auto py-2 px-5 font-bold rounded-lg shadow-md 
                                       bg-vermelho-principal text-white hover:bg-red-700 transition duration-300 transform hover:-translate-y-0.5"
                            >
                                Adicionar
                            </button>
                        </div>
                    </form>
                </div>
            {% endfor %}
        </div>
    {% endif %}
{% endblock %}