{% extends "base.html" %}
{% block title %}Produtos{% endblock %}

{% block content %}
    <div class="flex flex-wrap justify-between items-center gap-4 mb-4">
        <h2 class="text-3xl font-bold text-preto-texto">Gestão de Produtos</h2>
        <a href="{% url 'produto_criar' %}" 
           class="py-2 px-4 font-bold rounded-lg shadow-md 
                  bg-verde-principal text-white hover:bg-green-700 transition duration-300 transform hover:-translate-y-0.5"
        >
            + Novo Produto
        </a>
    </div>
    <hr class="border-gray-200 mb-8">

    <div class="overflow-x-auto shadow-md rounded-xl">
        <table class="w-full text-left border-collapse">
            <thead class="bg-amarelo-principal text-preto-texto uppercase text-sm font-bold tracking-wider">
                <tr>
                    <th class="py-3 px-4 rounded-tl-xl w-12">ID</th>
                    <th class="py-3 px-4">Nome</th>
                    <th class="py-3 px-4 whitespace-nowrap text-right">Preço</th>
                    <th class="py-3 px-4 w-24">Tipo</th>
                    <th class="py-3 px-4 rounded-tr-xl w-40">Ações</th>
                </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-100">
                {% for produto in produtos %}
                    <tr class="hover:bg-gray-50 transition duration-150">
                        <td class="py-3 px-4 text-sm font-medium text-gray-700">{{ produto.id }}</td>
                        <td class="py-3 px-4 font-semibold">{{ produto.nome }}</td>
                        <td class="py-3 px-4 text-right text-lg font-extrabold text-vermelho-principal whitespace-nowrap">
                            R$ {{ produto.preco|floatformat:2 }}
                        </td>
                        <td class="py-3 px-4 text-sm">
                            {% if produto.is_combo %}
                                <span class="text-amarelo-principal font-semibold">Combo</span>
                            {% else %}
                                Item
                            {% endif %}
                        </td>
                        <td class="py-3 px-4 whitespace-nowrap space-x-2">
                            <a href="{% url 'produto_editar' produto.id %}" 
                               class="py-1 px-3 font-semibold rounded-lg text-xs shadow-sm 
                                      bg-vermelho-principal text-white hover:bg-red-700 transition duration-300 transform hover:-translate-y-0.5"
                            >
                                Editar
                            </a>
                            <form action="{% url 'produto_remover' produto.id %}" 
                                  method="post" 
                                  class="inline-block" 
                                  onsubmit="return confirm('Remover {{ produto.nome }}? Esta ação é irreversível.');"
                            >
                                {% csrf_token %}
                                <button type="submit" 
                                        class="py-1 px-3 font-semibold rounded-lg text-xs shadow-sm 
                                               bg-red-700 text-white hover:bg-red-800 transition duration-300 transform hover:-translate-y-0.5"
                                >
                                    Remover
                                </button>
                            </form>
                        </td>
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="5" class="py-4 px-4 text-center text-cinza-texto italic">
                            Nenhum produto cadastrado.
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}